version: "3.7"

# Configuration in this file is merged with docker-compose.yml
# You can use it to make local changes to the configuration
# Some common configurations are added in comments below
services:
  ui:
    image: brewblox/brewblox-ui:develop
    volumes:
      # Generated by running "npm run devbuild"
      - ./dev/dist:/usr/share/nginx/html/ui
      - ./docker/conf/default.conf:/etc/nginx/conf.d/default.conf
    labels:
      - "traefik.port=80"
      - "traefik.frontend.rule=Path:/, /ui, /ui/{sub:(.*)?}"

  # automation:
  #   image: node
  #   volumes:
  #     - "../brewblox-automation/:/app/"
  #   working_dir: /app
  #   command: "npm run watch"

  # sparkey:
  #   volumes:
  #     - "../brewblox-devcon-spark/:/app/"

  # spock:
  #   volumes:
  #     - "../brewblox-devcon-spark/:/app/"

  # emitter:
  #   volumes:
  #     - "../brewblox-emitter/:/app/"
